[general]
database=ich21@zdev21_tcp
separator=;

# --- loadcustgroups test case: simulate customer group loading and flag operations ---
# Create temp table for customer groups
[transaction00]
sql=CREATE TABLE ich21@zdev21_tcp:temp_customergroup (\
    branchno INT,\
    customergroupno INT,\
    name VARCHAR(80),\
    sales_restr_ph INT,\
    block_flag INT,\
    basisnatra_flag INT,\
    upd_flag CHAR(1)\
);

# Create temp table for customer group flags
[transaction01]
sql=CREATE TABLE ich21@zdev21_tcp:temp_customergrpflags (\
    branchno INT,\
    customergroupno INT,\
    custgrpflagtype INT,\
    customergrpflag INT,\
    upd_flag CHAR(1)\
);

# Create temp table for customer group flag types
[transaction02]
sql=CREATE TABLE ich21@zdev21_tcp:temp_custgrpflagtypes (\
    branchno INT,\
    custgrpflagtype INT,\
    description VARCHAR(254),\
    index_dkkgr INT,\
    upd_flag CHAR(1)\
);

# Insert sample customer group
[transaction03]
sql=INSERT INTO ich21@zdev21_tcp:temp_customergroup (\
    branchno, customergroupno, name, sales_restr_ph, block_flag, basisnatra_flag, upd_flag\
) VALUES (1, 100, 'TestGroup', 0, 0, 0, '1');

# Insert sample customer group flag
[transaction04]
sql=INSERT INTO ich21@zdev21_tcp:temp_customergrpflags (\
    branchno, customergroupno, custgrpflagtype, customergrpflag, upd_flag\
) VALUES (1, 100, 10, 1, '1');

# Insert sample customer group flag type
[transaction05]
sql=INSERT INTO ich21@zdev21_tcp:temp_custgrpflagtypes (\
    branchno, custgrpflagtype, description, index_dkkgr, upd_flag\
) VALUES (1, 10, 'TestType', 1, '1');

# Complex SELECT: join customer groups and flags
[transaction06]
sql=SELECT (cg.branchno || ';' || cg.customergroupno || ';' || cg.name || ';' || cg.sales_restr_ph || ';' || cg.block_flag || ';' || cg.basisnatra_flag || ';' || cg.upd_flag || ';' || f.custgrpflagtype || ';' || f.customergrpflag || ';' || f.upd_flag) AS result \
    FROM ich21@zdev21_tcp:temp_customergroup cg \
    LEFT JOIN ich21@zdev21_tcp:temp_customergrpflags f ON cg.branchno = f.branchno AND cg.customergroupno = f.customergroupno \
    ORDER BY cg.branchno, cg.customergroupno;
header=BranchNo;CustomerGroupNo;Name;SalesRestrPH;BlockFlag;BasisNatraFlag;UpdFlag;CustGrpFlagType;CustomerGrpFlag;FlagUpdFlag
separator=;
limit=10

# Complex SELECT: join flag types and flags
[transaction07]
sql=SELECT (t.branchno || ';' || t.custgrpflagtype || ';' || t.description || ';' || t.index_dkkgr || ';' || t.upd_flag || ';' || f.customergrpflag || ';' || f.upd_flag) AS result \
    FROM ich21@zdev21_tcp:temp_custgrpflagtypes t \
    LEFT JOIN ich21@zdev21_tcp:temp_customergrpflags f ON t.branchno = f.branchno AND t.custgrpflagtype = f.custgrpflagtype \
    ORDER BY t.branchno, t.custgrpflagtype;
header=BranchNo;CustGrpFlagType;Description;IndexDKKGR;TypeUpdFlag;CustomerGrpFlag;FlagUpdFlag
separator=;
limit=10

# Drop temp tables
[transaction08]
sql=DROP TABLE ich21@zdev21_tcp:temp_custgrpflagtypes;
[transaction09]
sql=DROP TABLE ich21@zdev21_tcp:temp_customergrpflags;
[transaction10]
sql=DROP TABLE ich21@zdev21_tcp:temp_customergroup;
