[general]
database=ich21@zdev21_tcp
separator=;

# tpldzentral test case: simulate ZAPFLEGE table operations
# Create temp table for ZAPFLEGE
[transaction00]
sql=CREATE TABLE ich21@zdev21_tcp:temp_zapflege (\
    artikel_nr INT,\
    datum INT\
);

# Insert sample ZAPFLEGE records
[transaction01]
sql=INSERT INTO ich21@zdev21_tcp:temp_zapflege (\
    artikel_nr, datum\
) VALUES (10001, 20240601);
[transaction02]
sql=INSERT INTO ich21@zdev21_tcp:temp_zapflege (\
    artikel_nr, datum\
) VALUES (10002, 20240602);
[transaction03]
sql=INSERT INTO ich21@zdev21_tcp:temp_zapflege (\
    artikel_nr, datum\
) VALUES (10003, 20240603);

# Complex SELECT: show all ZAPFLEGE records ordered by datum
[transaction04]
sql=SELECT (artikel_nr || ';' || datum) AS result \
    FROM ich21@zdev21_tcp:temp_zapflege \
    ORDER BY datum DESC;
header=ArtikelNr;Datum
separator=;
limit=10

# Subquery: select ZAPFLEGE records with datum after 20240601
[transaction05]
sql=SELECT (artikel_nr || ';' || datum) AS result \
    FROM ich21@zdev21_tcp:temp_zapflege \
    WHERE datum > 20240601 \
    ORDER BY datum;
header=ArtikelNr;Datum
separator=;
limit=10

# Drop temp table
[transaction06]
sql=DROP TABLE ich21@zdev21_tcp:temp_zapflege;

# tpldzentral sync test case: sync temp_artselect to temp_zapflege
# Create temp table for ARTSELECT
[transaction07]
sql=CREATE TABLE ich21@zdev21_tcp:temp_artselect (\
    artikel_nr INT,\
    artikel_name VARCHAR(30),\
    packgroesse INT,\
    datum INT\
);

# Insert sample ARTSELECT records
[transaction08]
sql=INSERT INTO ich21@zdev21_tcp:temp_artselect (\
    artikel_nr, artikel_name, packgroesse, datum\
) VALUES (20001, 'Ibuprofen 400mg', 20, 20240601);
[transaction09]
sql=INSERT INTO ich21@zdev21_tcp:temp_artselect (\
    artikel_nr, artikel_name, packgroesse, datum\
) VALUES (20002, 'Paracetamol 500mg', 10, 20240602);
[transaction10]
sql=INSERT INTO ich21@zdev21_tcp:temp_artselect (\
    artikel_nr, artikel_name, packgroesse, datum\
) VALUES (20003, 'Aspirin 100mg', 30, 20240603);

# SELECT: show all ARTSELECT records after insert
[transaction11]
sql=SELECT (artikel_nr || ';' || artikel_name || ';' || packgroesse || ';' || datum) AS result \
    FROM ich21@zdev21_tcp:temp_artselect \
    ORDER BY datum DESC;
header=ArtikelNr;ArtikelName;Packgroesse;Datum
separator=;
limit=10

# Create temp table for ZAPFLEGE
[transaction12]
sql=CREATE TABLE ich21@zdev21_tcp:temp_zapflege (\
    artikel_nr INT,\
    datum INT\
);

# Sync: copy records from temp_artselect to temp_zapflege where packgroesse >= 20
[transaction13]
sql=INSERT INTO ich21@zdev21_tcp:temp_zapflege (\
    artikel_nr, datum\
) SELECT artikel_nr, datum FROM ich21@zdev21_tcp:temp_artselect \
    WHERE packgroesse >= 20;

# SELECT: show all ZAPFLEGE records after sync
[transaction14]
sql=SELECT (artikel_nr || ';' || datum) AS result \
    FROM ich21@zdev21_tcp:temp_zapflege \
    ORDER BY datum DESC;
header=ArtikelNr;Datum
separator=;
limit=10

# Drop temp tables
[transaction15]
sql=DROP TABLE ich21@zdev21_tcp:temp_zapflege;
[transaction16]
sql=DROP TABLE ich21@zdev21_tcp:temp_artselect;
