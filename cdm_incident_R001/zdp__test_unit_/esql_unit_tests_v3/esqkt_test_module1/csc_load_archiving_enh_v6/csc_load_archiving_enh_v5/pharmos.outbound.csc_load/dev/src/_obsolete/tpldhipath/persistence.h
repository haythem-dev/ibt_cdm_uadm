#ifndef __PERSISTENCE_H__
#define __PERSISTENCE_H__ __PERSISTENCE_H__

///////////////////////////////////////////////////////////////////////////////////////////////////////
// Includes 
///////////////////////////////////////////////////////////////////////////////////////////////////////
#include <string>
#include <list>
#include "kunde.h"

///////////////////////////////////////////////////////////////////////////////////////////////////////
// Forward declaration
///////////////////////////////////////////////////////////////////////////////////////////////////////
class SCustomRoutingTable; 

///////////////////////////////////////////////////////////////////////////////////////////////////////
// class SLogFile
///////////////////////////////////////////////////////////////////////////////////////////////////////
class Persistence
{
public:
    virtual ~Persistence();
    virtual bool open( const std::string& resource )  = 0;
    virtual bool close() = 0;
    virtual std::pair<bool, unsigned long> erase( const unsigned int dc, const long lDateOfRunning ) = 0;
    std::pair< bool, S_Counter > processAndSave( const std::list<S_SQLKUNDE>& customers, const long lDateOfRunning );

    const std::string& getErrMsg() const;
protected:
	Persistence();
    virtual bool save( SCustomRoutingTable& customer ) = 0;
    virtual SCustomRoutingTable* createCustomRoutingTable() = 0;

    std::string m_ErrMsg;
};

#endif // __PERSISTENCE_H__
