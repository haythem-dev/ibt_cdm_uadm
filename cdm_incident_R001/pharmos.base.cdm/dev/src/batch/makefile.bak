#=============================================================
#   recursive makefile
#   24.03.2017
#   v 1.0.0
#=============================================================

#-------------------------------------------------------------
# subprojects
#-------------------------------------------------------------

SUBPROJECTS = \
	zpiartik \
	zpignart \
	zpagpgnart \
	zpadglf \
	srvzdpdruck \
	zpadgreimp \
	zpautidm \
	zpcalcprice \
	zpcalcrg \
	zpcronpf \
	zpdailyclosing \
	zpdatacarelf \
	zpdcartik \
	zpdcgnart \
	zpdefpa \
	zpdrupro \
	zpifalf \
	zpifestb \
	zpiherst \
	zpimswgr \
	zpisichg \
	zpisiclf \
	zplfzart \
	zpliartik \
	zplieums \
	zplignart \
	zplilf \
	zpmasaen \
	zpprotok \
	zppwartik \
	zpumldir \
	zputil \
	importarticlegenerator \
	zpldcust \
	ibtrelevantcalculator \
	exportarticlecalculator \
	fmdrelevantcalculator \
	loadcontractshr \
	mainwarehousearticlesrelevantcalculator \
    importpricelist 

#-------------------------------------------------------------
# build recurse macro
#-------------------------------------------------------------

BUILD_RECUR = @+ \
	set -e; \
	for prj in $(SUBPROJECTS); do \
		echo "Entering $$prj"; \
		cd "$$prj";           \
		$(MAKE) $@;           \
		echo "Leaving $$prj"; \
		cd ..;                \
	done

#-------------------------------------------------------------
# build targets
#-------------------------------------------------------------

dbg:
	$(BUILD_RECUR)

all:
	$(BUILD_RECUR)

rel:
	$(BUILD_RECUR)

#-------------------------------------------------------------
# clean generated files
#-------------------------------------------------------------

clean:
	$(BUILD_RECUR)

cleanall:
	$(BUILD_RECUR)

cleandbg:
	$(BUILD_RECUR)

cleanrel:
	$(BUILD_RECUR)

#-------------------------------------------------------------
# install target
#-------------------------------------------------------------
install: 
	collectbins.sh

#-------------------------------------------------------------
# usage
#-------------------------------------------------------------
help:
	@echo ""
	@echo "usage:"
	@echo "  make           : build default configuration"
	@echo "  make all       : build all configurations"
	@echo "  make dbg       : build debug configuration"
	@echo "  make rel       : build release configuration"
	@echo ""
	@echo "  make clean     : delete default configuration"
	@echo "  make cleanall  : delete all configurations"
	@echo "  make cleandbg  : delete debug configuration"
	@echo "  make cleanrel  : delete release configuration"
	@echo ""
	@echo "  make help      : makefile usage"
	@echo ""

